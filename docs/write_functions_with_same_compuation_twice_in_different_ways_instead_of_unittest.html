<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>【思考実験】テストのために２通りの方法で同じ計算を記述する</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
</head>

<body>
    <html><head></head><body><h1>【思考実験】テストのために２通りの方法で同じ計算を記述する</h1>
<p>通常、なにかの計算をする関数を記述するときに処理が正しいかをある程度保証するため、関数の入力と期待される出力からなるユニットテストを書きます。</p>
<p>ここでたまに問題に思うのが、</p>
<ul>
<li>テストケースとして用意した期待される出力があってる保証がない</li>
<li>関数によっては期待される出力を用意することがなかなか面倒</li>
<li>境界値などのテストケースを増やす労力が大きい</li>
</ul>
<p>という点です。
なぜこれが起こるのか考えていたのですが、結局のところは、期待される出力を用意するときに人力で関数と同じ計算を自分でやっているからなのではないかと思い至りました。</p>
<p>この問題を解決する方法として、同じ計算を行う関数を２つ、できれば違う方針で解くものを作ればよいのではないでしょうか。</p>
<p>考えられる利点と欠点としては、</p>
<ul>
<li><p>利点</p>
<ul>
<li>ある実装が正しそうかを多くの入力に対して簡単に調べられる</li>
<li>２通りの関数を書く過程で問題に対する理解が深まる</li>
<li>異なるアルゴリズム間でのパフォーマンスを比較するなどが同時にできる</li>
<li>（ミッションクリティカルな問題については）実行時に両方動かし答えが一致しないならば結果が信頼できないとして止めることができる</li>
</ul>
</li>
<li><p>欠点</p>
<ul>
<li>実装の手間が二倍になる<ul>
<li>AIの支援があればそこまで問題でないか</li>
</ul>
</li>
<li>レビューの手間が２倍になる</li>
<li>テスト実行が重くなる</li>
</ul>
</li>
</ul>
<p>辺りでしょうか。</p>
<p>しばらく、余裕があるときに試していこうと思います。</p>
<h2>追記</h2>
<p>いいアイデアだと思い書き始めたんですが、書いているうちにどこかで聞いた話だという感想が湧いてきました。
探しましたが、たぶんこのあたりに影響を受けていそうです。
<a href="https://nowokay.hatenablog.com/entry/2023/01/25/003302">テストコードがコードの冗長化であることについて - きしだのHatena</a></p>
</body></html>
        <hr>
        <footer>
            <p><a href="index.html">index page</a></p>
            <p><a href="https://github.com/parsdrago/blog">GitHub Repository</a></p>
        </footer>
</body>

</html>